---
title:  Histórico de doações
---

<section id="historico-doacoes" ng-controller="DonationHistoryController">
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
        <h1 class="page-title">Histórico de transações</h1>
      </div>

      <div class="col-md-6">
        <div class="dropdown">
          <button class="btn btn-default btn-sm dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown">
            Baixar como...
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
            <li><a href="{{download.csv_file()}}" target="_blank">Arquivo CSV (.csv)</a></li>
          </ul>
        </div>
      </div>
      <div class="col-md-6">
        <a class="btn btn-default btn-sm pull-right" href="/cadastro-completo/">Voltar ao inicio</a>
      </div>

      <div class="col-md-12" style="margin-top:20px;">

        <div class="table-responsive">
          <div id="donations-table" class="hide">
            <table class="table table-striped table-bordered"  at-table at-list="donations" at-config="config" at-paginated>
              <thead>
              </thead>
              <tbody>
                <tr>
                  <td at-implicit at-attribute="name" at-title="Nome do doador:"></td>
                  <td at-attribute="transaction_hash" at-title="Endereço na Blockchain:">
                    <a href="//etherscan.io/tx/{{item.transaction_hash}}" target="_blank">{{item.transaction_hash | limitTo : 10}}...</a>
                  </td>
                  <td at-attribute="email" at-title="E-mail:">
                    <a href="mailto:{{item.email}}" title="Enviar email para o doador">{{item.email}}</a>
                  </td>
                  <td at-attribute="cpf" at-title="CPF:">
                    <a href="https://www.receita.fazenda.gov.br/Aplicacoes/SSL/ATCTA/CPF/ConsultaPublica.asp" target="_blank" title="Consultar este CPF">{{item.cpf}}</a>
                  </td>
                  <td at-attribute="birthday" at-title="Nascimento:">{{item.birthday}}</td>
                  <td at-attribute="document_number" at-title="Número do Documento:">{{item.document_number}}</td>
                  <td at-attribute="authorization_number" at-title="Número da Autorização:">{{item.authorization_number}}</td>
                  <td at-attribute="pgone" at-title="Telefone:">{{item.phone}}</td>
                  <td at-attribute="amount" at-title="Valor doado:">
                    {{(item.amount/100) | currency}}
                  </td>
                  <td at-attribute="captured_at" at-title="Data:">
                    <span title="{{item.captured_at}}">{{item.captured_at | date:'dd.MM.yyyy'}}</span>
                  </td>
                </tr>
              </tbody>
            </table>
            <at-pagination at-config="config" at-list="donations"></at-pagination>
          </div>

          <table id="donations-table" class="table table-bordered tabela-hist-doa hide">
            <thead>
              <tr>
                <th>ID:</th>
                <th>Nome do Doador:</th>
                <th>E-mail:</th>
                <th>CPF:</th>
                <th>Nascimento:</th>
                <th>Documento:</th>
                <th>Autorização:</th>
                <th>Telefone:</th>
                <th>Valor doado:</th>
                <th>Data:</th>
                <th class="hide">Projetos Escolhidos</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="d in donations">
                <td>{{d.receipt_id}}</td>
                <td><a href="//etherscan.io/tx/{{d.transaction_hash}}" title="Abrir a transação na Ethereum" target="_blank">{{d.name}}</a></td>
                <td><a href="mailto:{{d.email}}" title="Enviar email para o doador">{{d.email}}</a></td>
                <td><a href="https://www.receita.fazenda.gov.br/Aplicacoes/SSL/ATCTA/CPF/ConsultaPublica.asp" target="_blank" title="Consultar este CPF">{{d.cpf}}</a></td>
                <td>{{d.birthday}}</td>
                <td>{{d.document_number}}</td>
                <td>{{d.authorization_number}}</td>
                <td>{{d.phone}}</td>
                <td>{{(d.amount/100) | currency}}</td>
                <td><span title="{{d.captured_at}}">{{d.captured_at | date:'dd.MM.yyyy'}}</span></td>
                <td class="hide"><span class="quadro-verde">&nbsp;</span> Projeto 01 <span class="quadro-verde">&nbsp;</span> Projeto 05 <span class="quadro-verde">&nbsp;</span> Projeto 11</td>
              </tr>
              <tr ng-if="donations.length == 0">
                <td colspan="10" class="warning">
                  <span class="text-warning">
                    <i class="fa fa-exclamation-circle"></i>
                    Nenhum registro de doações foi encontrado!</span>
                </td>
              </tr>
            </tbody>
          </table>

          <div id="loading-donations" class="text-center">
            <i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw text-success" style="opacity:0.6"></i> 
            <p class="text-success">Carregando</p>
          </div>

          <div class="carrega-mais-hist-container hide">
            <button id="carrega-mais-hist" class="btn btn-default">Carregar mais</button>
          </div>
        </div>
      </div>

    </div>
  </div>

</section>

