(function(){this.VotoLegal=this.VotoLegal||{},VotoLegal.Estatisticas=function(){function t(t){this.options=null!=t?t:{},this.make(),this.load()}return t.prototype.make=function(){return this.elementClass="section#estatistica",this.$element=$(this.elementClass)},t.prototype.load=function(t){var o,e,a;null==t&&(t={}),o=$("#loading").css({display:"block"}),console.log(BASE_API),console.log("fetching data from "+BASE_API+"/stats/depth");try{return $.ajax({method:"GET",url:BASE_API+"/stats/depth",dataType:"json"}).then(function(t){return function(o){var e;return e=o,t._makeCharts(e),t._populateModels(e)}}(this),function(){return function(){return swal("N\xe3o foi poss\xedvel carregar os dados dos graficos!")}}(this))}catch(a){return e=a,console.error(e)}finally{o.fadeOut("slow")}},t.prototype._makeCharts=function(t){return this._chartDonators(t.graph),this._chartAmounts(t.graph)},t.prototype._populateModels=function(t){var o;return o=$("h3"),o.each(function(o,e){var a,n;switch(n=t[$(e).data("model")],a=$(e).data("formatter")||""){case"currency":n=new BrazilianCurrency(n/100).format({simbol:!0})}return e&&n?e.innerHTML=n||0:void 0})},t.prototype._chartDonators=function(t){var o,e,a,n;for(o=[],a=0,n=t.length;n>a;a++)e=t[a],o.push(e.count||0);return new VotoLegal.Components.DoadoresChart({el:"canvas-doadores",data:o,color:"#662e91",label:"Doadores"})},t.prototype._chartAmounts=function(t){var o,e,a,n;for(o=[],a=0,n=t.length;n>a;a++)e=t[a],o.push(parseFloat(e.amount/100).toFixed(2)||0);return new VotoLegal.Components.DoadoresChart({el:"canvas-valor",data:o,color:"#fece6a",label:"R$"})},t}(),this.VotoLegal=this.VotoLegal||{},this.VotoLegal.Components=this.VotoLegal.Components||{},VotoLegal.Components.DoadoresChart=function(){function t(t){this.options=null!=t?t:{},this.process()}return t.prototype.process=function(){var t,o,e,a,n;t={labels:["Agosto","Setembro"],datasets:[{label:this.options.label||"No",backgroundColor:this.options.color||"#fece6a",data:this.options.data||[]}]};try{return o=document.getElementById(this.options.el||"").getContext("2d"),n=new Chart(o,{type:"bar",data:t,options:{scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{display:!1,gridLines:{display:!1}}]},title:{display:!1},responsive:!0,legend:{display:!1}}})}catch(a){return e=a,console.error(e)}},t}(),$(function(){var t,o,e,a,n;return a=document.location.href,a.match(/votolegal.org.br\/estatistica/i)?void 0:(t=$("body"),e=t.data("controller"),o=t.data("action"),n=new VotoLegal[e])})}).call(this);