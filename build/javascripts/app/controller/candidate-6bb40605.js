document.location.href.indexOf("/candidato")>=0&&(app.votolegal.config(["$routeProvider",function(e){e.when("/",{templateUrl:"/javascripts/app/view/candidato/index.tmpl",controller:"CandidateController"}).when("/doar",{templateUrl:"/javascripts/app/view/candidato/doar.tmpl",controller:"CandidateController"}).otherwise({redirectTo:"/"})}]),$(document).ready(function(){$("body").on("click","input.opcao_doar_radio",function(e){e.preventDefault,$(".valor-doa-container").removeClass("doa-container-active"),$(this).closest(".valor-doa-container").addClass("doa-container-active")}),$("input.opcao_doar_radio:checked").trigger("click")})),app.votolegal.controller("CandidateController",["$scope","$http","$sce","serialize","auth_service","SweetAlert",function(e,t,o,n,a,r){e.candidate={},e.doar={},e.payment={},e.name=function(){var e=document.location.href;return e=e.split(/\//)[2].split(".")[0],"localhost"!==e?e:void 0}(),e.make_percent=function(e,t){return 0===t?"0%":(e/t*100).toFixed(2)+"%"},e.render_video=function(e){return'<iframe id="candidate_video" src="'+o.trustAsResourceUrl(e)+'" width="560" height="315" allowfullscreen></iframe>'},e._issues_priorities_decorator=function(t){return e.candidate.candidate_issue_priorities.map(function(e){return e.name}).join(t||", ")},e.candidate_by_name=function(o){return t({method:"GET",url:"/api/candidate/"+o}).then(function(t){var o=t.data.candidate;e.candidate=o,function(){var t=document.querySelector("title");"VotoLegal - Candidato(a)"===t.innerText&&(t.innerText+=" "+e.candidate.popular_name)}(),e.candidate.issues_decorator=e._issues_priorities_decorator(),e.candidate.total_donated=e.candidate.total_donated||0,e.candidate.raising_goal=parseFloat(e.candidate.raising_goal)||0,function(){var t=document.querySelector("#video-renderer");t&&(t.innerHTML=e.render_video(o.video_url))}(),e.candidate.projects=[],e.candidate_projects(o)},function(e){throw trouble.shoot({route:document.location.href,error:JSON.stringify(e)}),new Error("Model is invalid or cannot be found!")}),!1},e.candidate_projects=function(o){return t({method:"GET",url:"/api/candidate/"+o.id+"/projects"}).then(function(t){var o=t.data.projects;!function(){var e=0;o.map(function(t){e+=t.votes}),o=o.map(function(t){return t.total=e,t})}(),e.candidate.projects=o},function(e){throw trouble.shoot({route:document.location.href,error:JSON.stringify(e)}),new Error("Project list is invalid or cannot be found!")}),!1},e.doar_continue=function(t){if(console.log(t),!t||10>t)return r.swal("Preencha um valor superior a 10,00 reais."),!1;document.getElementById("amount-review").classList.remove("hide");var o=document.querySelectorAll(".valor-doa-container");for(var n in o)o[n]&&o[n].classList&&o[n].classList.add("hide");document.getElementById("doar-form").classList.remove("hide"),e.get_session()},e.doar_edit=function(){document.getElementById("amount-review").classList.add("hide");var e=document.querySelectorAll(".valor-doa-container");for(var t in e)e[t]&&e[t].classList&&e[t].classList.remove("hide");document.getElementById("doar-form").classList.add("hide")},e.get_session=function(){var o=e.candidate.id||0;return t({url:"/api/candidate/"+o+"/donate/session"}).then(function(e){console.log(e)},function(e){console.log(e)}),!1},e.candidate_by_name(e.name)}]);