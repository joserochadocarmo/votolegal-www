app.votolegal.controller("VoteController",["$scope","$http","$sce","serialize","$interval","SweetAlert","trouble","postmon",function(e,o,t,n,r,a){e.set_vote=function(e){var o=[],t=document.querySelectorAll(".vote--item");return t.forEach(function(e){e.checked&&o.push(e)}),console.log(e),o.length>3&&a.swal("Selecione apenas 3 assuntos priorit\xe1rios."),!1},e.generate_project=function(){var o=function(e){var o="",t=document.getElementById("project-template").innerHTML,n=_.template(t);e.forEach(function(e,t){var r=n({title:"Projeto"+(t+1)+") "+e.title,description:e.scope,value:e.id});o+=r});var r=document.getElementById("project--list");r&&(r.innerHTML=o)};!function(){var t=r(function(){e.candidate&&e.candidate.projects&&e.candidate.projects.length>0&&(o(e.candidate.projects||[]),r.cancel(t))},100)}()},e.save_vote=function(){var e=document.querySelectorAll(".vote--item");if(e=_.filter(e,function(e){return e.checked?e:void 0}),console.log(e),!e||3!==e.length)return e.length>3&&a.swal("Selecione apenas 3 projetos priorit\xe1rios para a vota\xe7\xe3o."),e.length<3&&a.swal("Selecione 3 projetos priorit\xe1rios para a vota\xe7\xe3o."),!1;var t=_.map(e,function(e){return e.value});return console.log(t),o({method:"POST",url:"/api/",data:n.from_object(params),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){console.log(e)},function(e){console.log(e)}),a.swal("Obrigado por votar","Seu voto foi salvo com sucesso!"),!1},e.generate_project()}]);