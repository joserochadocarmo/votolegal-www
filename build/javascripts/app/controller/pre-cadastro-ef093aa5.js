app.votolegal.controller("PreCadastroController",["$scope","$http","postmon","serialize",function(a,e,r,t){a.candidate={},a.submit_disabled=!1,a.register_params=function(){return a.candidate},a.create=function(){var r=a.register_params();return a.error_list=[],a.candidate.password&&a.candidate.password==a.candidate.confirm_password?a.accept_terms||a.transparent_campaign?(a.submit_disabled=!0,e({method:"POST",url:"/api/register",data:t.from_object(r),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){return 0==a.error_list.length&&(document.location="/pre-cadastro/success"),!1},function(e){var r=e.data.form_error,t=function(a){return document.querySelector("form[name=candidateForm] *[name="+a+"]")},o=function(a){var e={missing:" n\xe3o foi preenchido.","already exists":" j\xe1 foi cadastrado.",invalid:" est\xe1 inv\xe1lido."};return e[a]};for(var n in r){var s=t(n).attributes.placeholder.value;a.error_list.push(s+o(r[n]))}throw a.candidate.password&&a.candidate.password!=a.candidate.confirm_password&&a.error_list.push("Os campos de senha devem ser iguais."),a.accept_terms||a.transparent_campaign||(a.accept_terms||a.error_list.push("Voc\xea deve aceitar os termos de uso."),a.transparent_campaign||a.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente.")),a.submit_disabled=!1,new Error("ERROR_POST_NEW_CADIDATE")}),!1):(a.accept_terms||a.error_list.push("Voc\xea deve aceitar os termos de uso e a pol\xedtica de privacidade."),a.transparent_campaign||a.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente."),!1):(a.error_list.push("Os campos de senha devem ser iguais."),!1)},a.address_by_zipcode=function(){var e=a.candidate.address_zipcode;return 9==e.length&&r(e).then(function(e){var r=e.data,t=a.candidate;t.address_city=r.cidade,t.address_state=r.estado_info.nome,r.bairro&&r.logradouro&&(t.address_street=r.logradouro+" - "+r.bairro)},function(){throw swal({title:"Problemas ao carregar os dados do CEP!",text:"Ocorreu um erro ao tentar carregar os dados de sua localidade. Por gentileza preencha os campos manualmente."}),new Exception("ERROR_GET_ZIPCODE")}),!1},a.load_parties=function(){e.get("/api/party").then(function(e){a.party_list=e.data.party},function(){throw a.party_list=[],new Exception("ERROR_GET_PARTY_LIST")})},a.load_offices=function(){e.get("/api/office").then(function(e){a.office_list=e.data.office},function(){throw a.office_list=[],new Exception("ERROR_GET_OFFICE_LIST")})},a.reset=function(){a.candidate={}},a.load_offices(),a.load_parties()}]);