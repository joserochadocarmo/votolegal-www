app.votolegal.controller("PreCadastroController",["$scope","$http","postmon","serialize",function(r,e,a,t){r.candidate={},r.submit_disabled=!1,r.register_params=function(){return r.candidate},r.create=function(){var a=r.register_params();return r.error_list=[],r.accept_terms||r.transparent_campaign?r.candidate.password&&r.candidate.password==r.candidate.confirm_password?(r.submit_disabled=!0,e({method:"POST",url:"/api/register",data:t.from_object(a),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){return 0==r.error_list.length&&(document.location="/pre-cadastro/success"),!1},function(e){var a=e.data.form_error,t=function(r){return document.querySelector("form[name=candidateForm] *[name="+r+"]")};for(var o in a){if("cpf"==o&&"already exists"==a[o])return r.error_list.push("CPF j\xe1 cadastrado! Para completar o seu cadastro, por favor fa\xe7a o login."),!1;var s=t(o).attributes.placeholder.value;r.error_list.push(s+error_msg(a[o]))}throw r.candidate.password&&r.candidate.password!=r.candidate.confirm_password&&r.error_list.push("Os campos de senha devem ser iguais."),r.accept_terms||r.transparent_campaign||(r.accept_terms||r.error_list.push("Voc\xea deve aceitar os termos de uso."),r.transparent_campaign||r.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente.")),r.submit_disabled=!1,new Error("ERROR_POST_NEW_CADIDATE")}),!1):(r.error_list.push("Os campos de senha devem ser iguais."),!1):(r.accept_terms||r.error_list.push("Voc\xea deve aceitar os termos de uso."),r.transparent_campaign||r.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente."),!1)},r.address_by_zipcode=function(){var e=r.candidate.address_zipcode;return 9==e.length&&a(e).then(function(e){var a=e.data,t=r.candidate;t.address_city=a.cidade,t.address_state=a.estado_info.nome;var o=document.querySelector("form[name=candidateForm] *[name=address_street]");a.bairro&&a.logradouro?(t.address_street=a.logradouro+" - "+a.bairro,o.disabled=!0):(t.address_street="",o.disabled=!1)},function(){throw swal({title:"Problemas ao carregar os dados do CEP!",text:"Ocorreu um erro ao tentar carregar os dados de sua localidade. Verifique o CEP e tente novamente."}),new Error("ERROR_GET_ZIPCODE")}),!1},r.load_parties=function(){e.get("/api/party").then(function(e){r.party_list=e.data.party},function(){throw r.party_list=[],new Error("ERROR_GET_PARTY_LIST")})},r.load_offices=function(){e.get("/api/office").then(function(e){r.office_list=e.data.office},function(){throw r.office_list=[],new Error("ERROR_GET_OFFICE_LIST")})},r.reset=function(){r.candidate={}},r.load_offices(),r.load_parties()}]);