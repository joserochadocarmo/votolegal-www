app.votolegal.controller("PreCadastroController",["$scope","$http","postmon","serialize",function(a,r,e,t){a.candidate={},a.submit_disabled=!1,a.register_params=function(){return a.candidate},a.create=function(){var e=a.register_params();return a.error_list=[],a.candidate.ficha_limpa&&0!=a.candidate.ficha_limpa?a.accept_terms||a.transparent_campaign?a.candidate.password&&a.candidate.password==a.candidate.confirm_password?(a.submit_disabled=!0,r({method:"POST",url:"/api/register",data:t.from_object(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){return 0==a.error_list.length&&(document.location="/pre-cadastro/success"),!1},function(r){var e=r.data.form_error,t=function(a){return document.querySelector("form[name=candidateForm] *[name="+a+"]")};for(var o in e){if("cpf"==o&&"already exists"==e[o])return a.error_list.push("CPF j\xe1 cadastrado! Para completar o seu cadastro, por favor fa\xe7a o login."),!1;var s=t(o).attributes.placeholder.value;a.error_list.push(s+error_msg(e[o]))}throw a.candidate.password&&a.candidate.password!=a.candidate.confirm_password&&a.error_list.push("Os campos de senha devem ser iguais."),a.accept_terms||a.transparent_campaign||(a.accept_terms||a.error_list.push("Voc\xea deve aceitar os termos de uso."),a.transparent_campaign||a.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente.")),a.submit_disabled=!1,new Error("ERROR_POST_NEW_CADIDATE")}),!1):(a.error_list.push("Os campos de senha devem ser iguais."),!1):(a.accept_terms||a.error_list.push("Voc\xea deve aceitar os termos de uso."),a.transparent_campaign||a.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente."),!1):(a.error_list.push("Voc\xea deve ser ficha limpa para completar seu pr\xe9-cadastro."),!1)},a.address_by_zipcode=function(){var r=a.candidate.address_zipcode;return 9==r.length&&e(r).then(function(r){var e=r.data,t=a.candidate;t.address_city=e.cidade,t.address_state=e.estado_info.nome;var o=document.querySelector("form[name=candidateForm] *[name=address_street]");e.bairro&&e.logradouro?(t.address_street=e.logradouro+" - "+e.bairro,o.disabled=!0):(t.address_street="",o.disabled=!1)},function(){throw swal({title:"Problemas ao carregar os dados do CEP!",text:"Ocorreu um erro ao tentar carregar os dados de sua localidade. Verifique o CEP e tente novamente."}),new Error("ERROR_GET_ZIPCODE")}),!1},a.load_parties=function(){r.get("/api/party").then(function(r){a.party_list=r.data.party},function(){throw a.party_list=[],new Error("ERROR_GET_PARTY_LIST")})},a.load_offices=function(){r.get("/api/office").then(function(r){a.office_list=r.data.office},function(){throw a.office_list=[],new Error("ERROR_GET_OFFICE_LIST")})},a.reset=function(){a.candidate={}},a.load_offices(),a.load_parties()}]);