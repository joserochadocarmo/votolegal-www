app.votolegal.controller("ExploreController",["$scope","$http","auth_service","serialize","SweetAlert","trouble",function(t,e,r,a,i,o){t.list=[],t.party_list=[],t.term="",t.party={id:0,acronym:"Partido"},t.typesearch="Nome",t.redirect_to=function(t){if(t.website_url.length>0){var e=window.open(t.website_url,"_blank");return e.focus(),!1}return i.swal("Website n\xe3o definido","Este candidato n\xe3o configurou nenhum website para acesso."),!1},t.set_typesearch=function(e){t.typesearch=e},t.set_party=function(e){t.party=e},t.load_parties=function(){e.get("/api/party").then(function(e){t.party_list=e.data.party;for(var r in t.party_list)t.party_list[r].id==t.party.id&&(t.party=t.party_list[r])},function(){throw t.party_list=[],new Error("ERROR_GET_PARTY_LIST")})},t.load_list=function(r){var s={};switch(t.typesearch){case"Nome":s.name=r;break;case"Cidade":s.address_city=r}s.party_id=n;var d=document.querySelector("#loading-candidates"),c=document.querySelector(".candidate-list");return e({method:"post",url:"/api/search?results=9999",data:a.from_object(s),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.list=e.data,d&&d.classList.add("hide"),c&&c.classList.remove("hide")},function(t){t.data;i.swal("Erro inesperado","N\xe3o foi possivel carregar a lista de usu\xe1rios!"),o({route:document.location.href,error:JSON.stringify(t)}),d&&d.classList.add("hide"),c&&c.classList.remove("hide")}),!1};var s=URI.query("q")||void 0;t.term=s;var n=URI.query("party")||0;t.party.id=n,t.typesearch=URI.query("type")||"Nome",t.load_parties(),t.load_list(s)}]);