app.votolegal.controller("PreCadastroController",["$scope","$http","postmon","serialize",function(e,a,r,t){e.candidate={},e.submit_disabled=!1,e.register_params=function(){return e.candidate},e.create=function(){var r=e.register_params();return e.error_list=[],e.candidate.password&&e.candidate.password==e.candidate.confirm_password?e.accept_terms||e.transparent_campaign?(e.submit_disabled=!0,a({method:"POST",url:"/api/register",data:t.from_object(r),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){return 0==e.error_list.length&&(document.location="/pre-cadastro/success"),!1},function(a){var r=a.data.form_error,t=function(e){return document.querySelector("form[name=candidateForm] *[name="+e+"]")},o=function(e){var a={missing:" n\xe3o foi preenchido.","already exists":" j\xe1 foi cadastrado.",invalid:" est\xe1 inv\xe1lido."};return a[e]};for(var s in r){var n=t(s).attributes.placeholder.value;e.error_list.push(n+o(r[s]))}throw e.candidate.password&&e.candidate.password!=e.candidate.confirm_password&&e.error_list.push("Os campos de senha devem ser iguais."),e.accept_terms||e.transparent_campaign||(e.accept_terms||e.error_list.push("Voc\xea deve aceitar os termos de uso."),e.transparent_campaign||e.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente.")),e.submit_disabled=!1,new Error("ERROR_POST_NEW_CADIDATE")}),!1):(e.accept_terms||e.error_list.push("Voc\xea deve aceitar os termos de uso."),e.transparent_campaign||e.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente."),!1):(e.error_list.push("Os campos de senha devem ser iguais."),!1)},e.address_by_zipcode=function(){var a=e.candidate.address_zipcode;return 9==a.length&&r(a).then(function(a){var r=a.data,t=e.candidate;t.address_city=r.cidade,t.address_state=r.estado_info.nome;var o=document.querySelector("form[name=candidateForm] *[name=address_street]");r.bairro&&r.logradouro?(t.address_street=r.logradouro+" - "+r.bairro,o.disabled=!0):(t.address_street="",o.disabled=!1)},function(){throw swal({title:"Problemas ao carregar os dados do CEP!",text:"Ocorreu um erro ao tentar carregar os dados de sua localidade. Por gentileza preencha os campos manualmente."}),new Error("ERROR_GET_ZIPCODE")}),!1},e.load_parties=function(){a.get("/api/party").then(function(a){e.party_list=a.data.party},function(){throw e.party_list=[],new Error("ERROR_GET_PARTY_LIST")})},e.load_offices=function(){a.get("/api/office").then(function(a){e.office_list=a.data.office},function(){throw e.office_list=[],new Error("ERROR_GET_OFFICE_LIST")})},e.reset=function(){e.candidate={}},e.load_offices(),e.load_parties()}]);