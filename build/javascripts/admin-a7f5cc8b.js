!function(){"use strict";var e=function(){this.from_object=function(e){var r=[];if("object"!=typeof e)throw new Error("Param to be serializer isnt a object");for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];r.push(encodeURIComponent(n)+"="+encodeURIComponent(null==o?"":o))}return r.join("&").replace(/%20/g,"+")},this.from_form=function(e){var r=document.forms[e],n={};for(var o in r.elements)void 0!==r.elements[o].type&&(n[r.elements[o].name]=r.elements[o].value);return this.from_object(n)},this.to_json=function(e){return JSON.stringify(e)}},r=angular.module("admin",["angular-storage"]);r.config(["$httpProvider",function(e){delete e.defaults.headers.common["X-Requested-With"],e.defaults.headers.common["Content-Type"]="application/x-www-form-urlencoded"}]),r.factory("AuthService",["$http",function(e){return{authenticate:function(){return e({method:"POST",url:"/api/login",data:serialize.from_object(params),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),r.factory("serialize",function(){return new e}),r.controller("AdminApprovalController",["$scope","$http","serialize",function(e,r){e.approval_list=function(){var e={api_key:""};r({method:"GET",url:"/api/admin/candidate/list?api_key="+e.api_key}).then(function(e){console.log(e.data)},function(e){var r=e.data;return"access denied"===r.error&&(document.location="/admin/signin"),!1})},e.approval_list()}]),r.controller("AuthController",["$scope","$http","serialize","store",function(e,r,n,o){e.signin={},e.signin_params=function(){return e.signin},e.authenticate=function(){var t=e.signin_params();return r({method:"POST",url:"/api/login",data:n.from_object(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){var r=e.data;o.set("user",{id:r.user_id,api_key:r.api_key});for(var n in r.roles)if("admin"===r.roles[n]){document.location="/admin";break}return!1},function(r){var n=r.data;if(e.error_list=[],n.hasOwnProperty("error")){var o={"Bad email or password.":"E-mail ou senha incorretos."};e.error_list.push(o[n.error])}if(n.form_error){var t=function(e){return document.querySelector("form[name=authForm] *[name="+e+"]")},i=function(e){var r={missing:" n\xe3o foi preenchido.","already exists":" j\xe1 foi cadastrado.",invalid:" est\xe1 inv\xe1lido."};return r[e]};for(var a in n){var s=t(a).attributes.placeholder.value;e.error_list.push(s+i(n[a]))}}throw new Error("ERROR_POST_SIGNIN_USER")}),!1}}])}();