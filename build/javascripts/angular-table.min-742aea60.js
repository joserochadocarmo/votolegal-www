(function(){var t,e,n,i,r,a,o,s,u,g,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};angular.module("angular-table",[]),t=function(){function t(t,e){this.attribute=t.attribute,this.title=t.title,this.sortable=t.sortable,this.width=t.width,this.initialSorting=t.initialSorting,e&&(this.customContent=e.customContent,this.attributes=e.attributes)}return t.prototype.createElement=function(){var t;return t=angular.element(document.createElement("th"))},t.prototype.renderTitle=function(t){return t.html(this.customContent||this.title)},t.prototype.renderAttributes=function(t){var e,n,i,r,a;if(this.customContent){for(r=this.attributes,a=[],n=0,i=r.length;i>n;n++)e=r[n],a.push(t.attr(e.name,e.value));return a}},t.prototype.renderSorting=function(t){var e;return this.sortable?(t.attr("ng-click","predicate = '"+this.attribute+"'; descending = !descending;"),e=angular.element("<i style='margin-left: 10px;'></i>"),e.attr("ng-class","getSortIcon('"+this.attribute+"', predicate, descending)"),t.append(e)):void 0},t.prototype.renderWidth=function(t){return t.attr("width",this.width)},t.prototype.renderHtml=function(){var t;return t=this.createElement(),this.renderTitle(t),this.renderAttributes(t),this.renderSorting(t),this.renderWidth(t),t},t}(),u=function(){function t(t){this.configObjectName=t,this.itemsPerPage=""+this.configObjectName+".itemsPerPage",this.sortContext=""+this.configObjectName+".sortContext",this.fillLastPage=""+this.configObjectName+".fillLastPage",this.maxPages=""+this.configObjectName+".maxPages",this.currentPage=""+this.configObjectName+".currentPage",this.orderBy=""+this.configObjectName+".orderBy",this.paginatorLabels=""+this.configObjectName+".paginatorLabels"}return t}(),i=function(){function t(t,e,n){this.scope=t,this.configurationVariableNames=e,this.listName=n}return t.prototype.getList=function(){return this.scope.$eval(this.listName)},t.prototype.getItemsPerPage=function(){return this.scope.$eval(this.configurationVariableNames.itemsPerPage)||10},t.prototype.getCurrentPage=function(){return this.scope.$eval(this.configurationVariableNames.currentPage)||0},t.prototype.getMaxPages=function(){return this.scope.$eval(this.configurationVariableNames.maxPages)||void 0},t.prototype.getSortContext=function(){return this.scope.$eval(this.configurationVariableNames.sortContext)||"global"},t.prototype.setCurrentPage=function(t){return this.scope.$eval(""+this.configurationVariableNames.currentPage+"="+t)},t.prototype.getOrderBy=function(){return this.scope.$eval(this.configurationVariableNames.orderBy)||"orderBy"},t.prototype.getPaginatorLabels=function(){var t;return t={stepBack:"\u2039",stepAhead:"\u203a",jumpBack:"\xab",jumpAhead:"\xbb",first:"First",last:"Last"},this.scope.$eval(this.configurationVariableNames.paginatorLabels)||t},t}(),s=function(){function e(t,e){this.tableElement=t,this.attributes=e,this.id=this.attributes.id,this.config=this.attributes.atConfig,this.paginated=null!=this.attributes.atPaginated,this.list=this.attributes.atList,this.createColumnConfigurations()}return e.prototype.capitaliseFirstLetter=function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},e.prototype.extractWidth=function(t){var e;return e=/([0-9]+px)/i.exec(t),e?e[0]:""},e.prototype.isSortable=function(t){var e;return e=/(sortable)/i.exec(t),!!e},e.prototype.getInitialSorting=function(t){var e;if(e=t.attr("at-initial-sorting")){if("asc"===e||"desc"===e)return e;throw"Invalid value for initial-sorting: "+e+". Allowed values are 'asc' or 'desc'."}},e.prototype.collectHeaderMarkup=function(t){var e,n,i,r,a,o;for(e={},i=t.find("tr"),o=i.find("th"),r=0,a=o.length;a>r;r++)n=o[r],n=angular.element(n),e[n.attr("at-attribute")]={customContent:n.html(),attributes:n[0].attributes};return e},e.prototype.collectBodyMarkup=function(t){var e,n,i,r,a,o,s,u,g,l;for(n=[],l=t.find("td"),u=0,g=l.length;g>u;u++)a=l[u],a=angular.element(a),e=a.attr("at-attribute"),o=a.attr("at-title")||this.capitaliseFirstLetter(a.attr("at-attribute")),r=void 0!==a.attr("at-sortable")||this.isSortable(a.attr("class")),s=this.extractWidth(a.attr("class")),i=this.getInitialSorting(a),n.push({attribute:e,title:o,sortable:r,width:s,initialSorting:i});return n},e.prototype.createColumnConfigurations=function(){var e,n,i,r,a;for(n=this.collectHeaderMarkup(this.tableElement),e=this.collectBodyMarkup(this.tableElement),this.columnConfigurations=[],r=0,a=e.length;a>r;r++)i=e[r],this.columnConfigurations.push(new t(i,n[i.attribute]))},e}(),r=function(){function t(){}return t.prototype.setupTr=function(t,e){var n,i;return n=t.find("tbody"),i=n.find("tr"),i.attr("ng-repeat",e),n},t}(),a=function(t){function e(t,e){this.list=e,this.repeatString="item in "+this.list+" | orderBy:predicate:descending"}return c(e,t),e.prototype.compile=function(t){return this.setupTr(t,this.repeatString)},e.prototype.link=function(){},e}(r),n=function(t){function e(t){this.configurationVariableNames=t,this.repeatString="item in sortedAndPaginatedList"}return c(e,t),e.prototype.compile=function(t){var e,n,i,r,a,o,s;for(n=this.setupTr(t,this.repeatString),a=t.find("td"),r="",o=0,s=a.length;s>o;o++)i=a[o],r+="<td><span>&nbsp;</span></td>";e=angular.element(document.createElement("tr")),e.attr("ng-show",this.configurationVariableNames.fillLastPage),e.html(r),e.attr("ng-repeat","item in fillerArray"),n.append(e)},e.prototype.link=function(t,e,n,r){var a,o,s,u,g;return a=this.configurationVariableNames,g=new i(t,a,n.atList),s=function(t,e,n,i,r,a,o,s){var u,g;return t?(g=t,u=n*e-t.length,"global"===r?(g=s(i)(g,a,o),g=s("limitTo")(g,u),g=s("limitTo")(g,n)):(g=s("limitTo")(g,u),g=s("limitTo")(g,n),g=s(i)(g,a,o)),g):[]},o=function(t,e,n,i){var r,a,o,s,u,g,l,c,h,p;if(i=parseInt(i),t.length<=0){for(h=[],o=s=0,g=i-1;g>=0?g>=s:s>=g;o=g>=0?++s:--s)h.push(o);return h}if(e===n-1){if(a=t.length%i,0!==a){for(r=i-a-1,p=[],o=u=l=t.length,c=t.length+r;c>=l?c>=u:u>=c;o=c>=l?++u:--u)p.push(o);return p}return[]}},u=function(){var e;return t.sortedAndPaginatedList=s(g.getList(),g.getCurrentPage(),g.getItemsPerPage(),g.getOrderBy(),g.getSortContext(),t.predicate,t.descending,r),e=Math.ceil(g.getList().length/g.getItemsPerPage()),t.fillerArray=o(g.getList(),g.getCurrentPage(),e,g.getItemsPerPage())},t.$watch(a.currentPage,function(){return u()}),t.$watch(a.itemsPerPage,function(){return u()}),t.$watch(a.sortContext,function(){return u()}),t.$watchCollection(n.atList,function(){return u()}),t.$watch(""+n.atList+".length",function(){return t.numberOfPages=Math.ceil(g.getList().length/g.getItemsPerPage()),u()}),t.$watch("predicate",function(){return u()}),t.$watch("descending",function(){return u()})},e}(r),o=function(){function t(t,e,n){this.element=t,this.tableConfiguration=e,this.configurationVariableNames=n}return t.prototype.constructHeader=function(){var t,e,n,i,r;for(e=angular.element(document.createElement("tr")),r=this.tableConfiguration.columnConfigurations,n=0,i=r.length;i>n;n++)t=r[n],e.append(t.renderHtml());return e},t.prototype.setupHeader=function(){var t,e,n;return e=this.element.find("thead"),e?(t=this.constructHeader(),n=angular.element(e).find("tr"),n.remove(),e.append(t)):void 0},t.prototype.getSetup=function(){return this.tableConfiguration.paginated?new n(this.configurationVariableNames):new a(this.configurationVariableNames,this.tableConfiguration.list)},t.prototype.compile=function(){return this.setupHeader(),this.setup=this.getSetup(),this.setup.compile(this.element)},t.prototype.setupInitialSorting=function(t){var e,n,i,r,a;for(r=this.tableConfiguration.columnConfigurations,a=[],n=0,i=r.length;i>n;n++)if(e=r[n],e.initialSorting){if(!e.attribute)throw"initial-sorting specified without attribute.";t.predicate=e.attribute,a.push(t.descending="desc"===e.initialSorting)}else a.push(void 0);return a},t.prototype.post=function(t,e,n,i){return this.setupInitialSorting(t),t.getSortIcon||(t.getSortIcon=function(e,n,i){return e!==t.predicate?"glyphicon glyphicon-minus":i?"glyphicon glyphicon-chevron-down":"glyphicon glyphicon-chevron-up"}),this.setup.link(t,e,n,i)},t}(),e=function(){function t(t,e,n,i){if(this.lowerBound=null!=t?t:0,this.upperBound=null!=e?e:1,null==n&&(n=0),this.length=null!=i?i:1,this.length>this.upperBound-this.lowerBound)throw"sequence is too long";this.data=this.generate(n)}return t.prototype.generate=function(t){var e,n,i,r;for(t>this.upperBound-this.length?t=this.upperBound-this.length:t<this.lowerBound&&(t=this.lowerBound),r=[],e=n=t,i=parseInt(t)+parseInt(this.length)-1;i>=t?i>=n:n>=i;e=i>=t?++n:--n)r.push(e);return r},t.prototype.resetParameters=function(t,e,n){if(this.lowerBound=t,this.upperBound=e,this.length=n,this.length>this.upperBound-this.lowerBound)throw"sequence is too long";return this.data=this.generate(this.data[0])},t.prototype.relocate=function(t){var e;return e=this.data[0]+t,this.data=this.generate(e,e+this.length)},t.prototype.realignGreedy=function(t){var e;return t<this.data[0]?(e=t,this.data=this.generate(e)):t>this.data[this.length-1]?(e=t-(this.length-1),this.data=this.generate(e)):void 0},t.prototype.realignGenerous=function(){},t}(),g="<div style='margin: 0px;'> <ul class='pagination'> <li ng-class='{disabled: getCurrentPage() <= 0}'> <a href='' ng-click='stepPage(-numberOfPages)'>{{getPaginatorLabels().first}}</a> </li> <li ng-show='showSectioning()' ng-class='{disabled: getCurrentPage() <= 0}'> <a href='' ng-click='jumpBack()'>{{getPaginatorLabels().jumpBack}}</a> </li> <li ng-class='{disabled: getCurrentPage() <= 0}'> <a href='' ng-click='stepPage(-1)'>{{getPaginatorLabels().stepBack}}</a> </li> <li ng-class='{active: getCurrentPage() == page}' ng-repeat='page in pageSequence.data'> <a href='' ng-click='goToPage(page)' ng-bind='page + 1'></a> </li> <li ng-class='{disabled: getCurrentPage() >= numberOfPages - 1}'> <a href='' ng-click='stepPage(1)'>{{getPaginatorLabels().stepAhead}}</a> </li> <li ng-show='showSectioning()' ng-class='{disabled: getCurrentPage() >= numberOfPages - 1}'> <a href='' ng-click='jumpAhead()'>{{getPaginatorLabels().jumpAhead}}</a> </li> <li ng-class='{disabled: getCurrentPage() >= numberOfPages - 1}'> <a href='' ng-click='stepPage(numberOfPages)'>{{getPaginatorLabels().last}}</a> </li> </ul> </div>",angular.module("angular-table").directive("atTable",["$filter",function(t){return{restrict:"AC",scope:!0,compile:function(e,n){var i,r,a;return a=new s(e,n),i=new u(n.atConfig),r=new o(e,a,i),r.compile(),{post:function(e,n,i){return r.post(e,n,i,t)}}}}}]),angular.module("angular-table").directive("atPagination",[function(){return{restrict:"E",scope:!0,replace:!0,template:g,link:function(t,n,r){var a,o,s,g,l,c;return a=new u(r.atConfig),c=new i(t,a,r.atList),s=function(t,e,n){return t=Math.max(e,t),Math.min(n,t)},o=function(){return t.numberOfPages},g=function(e){return t.numberOfPages=e},l=function(){var e,n;return c.getList()?c.getList().length>0?(e=Math.ceil(c.getList().length/c.getItemsPerPage()),g(e),n=t.showSectioning()?c.getMaxPages():e,t.pageSequence.resetParameters(0,e,n),c.setCurrentPage(s(c.getCurrentPage(),0,o()-1)),t.pageSequence.realignGreedy(c.getCurrentPage())):(g(1),t.pageSequence.resetParameters(0,1,1),c.setCurrentPage(0),t.pageSequence.realignGreedy(0)):void 0},t.showSectioning=function(){return c.getMaxPages()&&o()>c.getMaxPages()},t.getCurrentPage=function(){return c.getCurrentPage()},t.getPaginatorLabels=function(){return c.getPaginatorLabels()},t.stepPage=function(e){return e=parseInt(e),c.setCurrentPage(s(c.getCurrentPage()+e,0,o()-1)),t.pageSequence.realignGreedy(c.getCurrentPage())},t.goToPage=function(t){return c.setCurrentPage(t)},t.jumpBack=function(){return t.stepPage(-c.getMaxPages())},t.jumpAhead=function(){return t.stepPage(c.getMaxPages())},t.pageSequence=new e,t.$watch(a.itemsPerPage,function(){return l()}),t.$watch(a.maxPages,function(){return l()}),t.$watch(r.atList,function(){return l()}),t.$watch(""+r.atList+".length",function(){return l()}),l()}}}]),angular.module("angular-table").directive("atImplicit",[function(){return{restrict:"AC",compile:function(t){var e;if(e=t.attr("at-attribute"),!e)throw"at-implicit specified without at-attribute: "+t.html();return t.append("<span ng-bind='item."+e+"'></span>")}}}])}).call(this);