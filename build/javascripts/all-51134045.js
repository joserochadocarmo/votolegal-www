!function(e){Array.prototype.map||(Array.prototype.map=function(e,t){var r,o,a;if(null==this)throw new TypeError(" this is null or not defined");var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(r=t),o=new Array(i),a=0;i>a;){var s,c;a in n&&(s=n[a],c=e.call(r,s,a,n),o[a]=c),a++}return o});var t=function(){this.from_object=function(e){var t=[];if("object"!=typeof e)throw new Error("Param to be serializer isnt a object");for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];t.push(encodeURIComponent(r)+"="+encodeURIComponent(null==o?"":o))}return t.join("&").replace(/%20/g,"+")},this.from_form=function(e){var t=document.forms[e],r={};for(var o in t.elements)void 0!==t.elements[o].type&&(r[t.elements[o].name]=t.elements[o].value);return this.from_object(r)},this.to_json=function(e){return JSON.stringify(e)}};e.votolegal=angular.module("votolegal",["ngMask","ngSanitize"]),e.votolegal.config(["$httpProvider",function(e){delete e.defaults.headers.common["X-Requested-With"],e.defaults.headers.common["Content-Type"]="application/x-www-form-urlencoded"}]),e.votolegal.filter("unsafe",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),e.votolegal.factory("postmon",["$http",function(e){return function(t){return e.get("http://api.postmon.com.br/v1/cep/"+t,{cache:!1})}}]),e.votolegal.factory("serialize",function(){return new t}),e.votolegal.controller("PreCadastroController",["$scope","$http","postmon","serialize",function(e,t,r,o){e.candidate={},e.register_params=function(){return e.candidate},e.create=function(){var r=e.register_params();return e.error_list=[],e.candidate.password!=e.candidate.confirm_password?(e.error_list.push("Os campos de senha devem ser iguais."),!1):e.accept_terms||e.transparent_campaign?(t({method:"POST",url:"http://45.55.50.43/api/register",data:o.from_object(r),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){return 0==e.error_list.length&&(document.location="/pre-cadastro/success"),!1},function(t){var r=t.data.form_error,o=function(e){return document.querySelector("form[name=candidateForm] *[name="+e+"]")},a=function(e){var t={missing:" n\xe3o foi preenchido.","already exists":" j\xe1 foi cadastrado.",invalid:" est\xe1 inv\xe1lido."};return t[e]};for(var n in r){var i=o(n).attributes.placeholder.value;e.error_list.push(i+a(r[n]))}throw e.candidate.password&&e.candidate.password!=e.candidate.confirm_password&&e.error_list.push("Os campos de senha devem ser iguais."),e.accept_terms||e.transparent_campaign||(e.accept_terms||e.error_list.push("Voc\xea deve aceitar os termos de uso."),e.transparent_campaign||e.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente.")),new Error("ERROR_POST_NEW_CADIDATE")}),!1):(e.accept_terms||e.error_list.push("Voc\xea deve aceitar os termos de uso."),e.transparent_campaign||e.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente."),!1)},e.address_by_zipcode=function(){var t=e.candidate.address_zipcode;return 9==t.length&&r(t).then(function(t){var r=t.data,o=e.candidate;o.address_city=r.cidade,o.address_state=r.estado_info.nome,r.bairro&&r.logradouro&&(o.address_street=r.logradouro+" - "+r.bairro)},function(){throw swal({title:"Problemas ao carregar os dados do CEP!",text:"Ocorreu um erro ao tentar carregar os dados de sua localidade. Por gentileza preencha os campos manualmente."}),new Exception("ERROR_GET_ZIPCODE")}),!1},e.load_parties=function(){t.get("http://45.55.50.43/api/party").then(function(t){e.party_list=t.data.party},function(){throw e.party_list=[],new Exception("ERROR_GET_PARTY_LIST")})},e.load_offices=function(){t.get("http://45.55.50.43/api/office").then(function(t){e.office_list=t.data.office},function(){throw e.office_list=[],new Exception("ERROR_GET_OFFICE_LIST")})},e.reset=function(){e.candidate={}},e.load_offices(),e.load_parties()}]),e.votolegal.controller("ContatoController",["$scope","$http","serialize",function(e,t,r){e.message={},e.message_params=function(){return e.message},e.create=function(){var o=e.message_params();return t({method:"POST",url:"http://45.55.50.43/api/contact",data:r.from_object(o),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){e.data;return document.location="/contato/success",!1},function(t){var r=t.data.form_error,o=function(e){return document.querySelector("form[name=contactForm] *[name="+e+"]")},a=function(e){var t={missing:" n\xe3o foi preenchido.","already exists":" j\xe1 foi cadastrado.",invalid:" est\xe1 inv\xe1lido."};return t[e]};e.error_list=[];for(var n in r){var i=o(n).attributes.placeholder.value;e.error_list.push(i+a(r[n]))}throw new Error("ERROR_POST_NEW_CONTACT")}),!1}}]),e.votolegal.controller("FaqController",["$scope","$sce",function(e){e.highlight=!0,e.faq_list=faq_list,e.search_answer=function(t){var r=faq_list.map(function(e){return e.title.match(new RegExp(t,"ig"))||e.content.match(new RegExp(t,"gi"))?e:void 0}),o=function(e){var t=[];for(var r in e)void 0!==e[r]&&t.push(e[r]);return t};return e.faq_list=o(r),!1}}])}(window.app=window.app||{});