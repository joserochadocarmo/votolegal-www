!function(e){Array.prototype.map||(Array.prototype.map=function(e,r){var t,o,a;if(null==this)throw new TypeError(" this is null or not defined");var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=r),o=new Array(i),a=0;i>a;){var s,c;a in n&&(s=n[a],c=e.call(t,s,a,n),o[a]=c),a++}return o});var r=function(){this.from_object=function(e){var r=[];if("object"!=typeof e)throw new Error("Param to be serializer isnt a object");for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];r.push(encodeURIComponent(t)+"="+encodeURIComponent(null==o?"":o))}return r.join("&").replace(/%20/g,"+")},this.from_form=function(e){var r=document.forms[e],t={};for(var o in r.elements)void 0!==r.elements[o].type&&(t[r.elements[o].name]=r.elements[o].value);return this.from_object(t)},this.to_json=function(e){return JSON.stringify(e)}};e.votolegal=angular.module("votolegal",["ngMask","ngSanitize"]),e.votolegal.config(["$httpProvider",function(e){delete e.defaults.headers.common["X-Requested-With"],e.defaults.headers.common["Content-Type"]="application/x-www-form-urlencoded"}]),e.votolegal.filter("unsafe",["$sce",function(e){return function(r){return e.trustAsHtml(r)}}]),e.votolegal.factory("postmon",["$http",function(e){return function(r){return e.get("//api.postmon.com.br/v1/cep/"+r,{cache:!1})}}]),e.votolegal.factory("serialize",function(){return new r}),e.votolegal.controller("PreCadastroController",["$scope","$http","postmon","serialize",function(e,r,t,o){e.candidate={},e.submit_disabled=!1,e.register_params=function(){return e.candidate},e.create=function(){var t=e.register_params();return e.error_list=[],e.candidate.password&&e.candidate.password==e.candidate.confirm_password?e.accept_terms||e.transparent_campaign?(e.submit_disabled=!0,r({method:"POST",url:"/api/register",data:o.from_object(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){return 0==e.error_list.length&&(document.location="/pre-cadastro/success"),!1},function(r){var t=r.data.form_error,o=function(e){return document.querySelector("form[name=candidateForm] *[name="+e+"]")},a=function(e){var r={missing:" n\xe3o foi preenchido.","already exists":" j\xe1 foi cadastrado.",invalid:" est\xe1 inv\xe1lido."};return r[e]};for(var n in t){var i=o(n).attributes.placeholder.value;e.error_list.push(i+a(t[n]))}throw e.candidate.password&&e.candidate.password!=e.candidate.confirm_password&&e.error_list.push("Os campos de senha devem ser iguais."),e.accept_terms||e.transparent_campaign||(e.accept_terms||e.error_list.push("Voc\xea deve aceitar os termos de uso."),e.transparent_campaign||e.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente.")),e.submit_disabled=!1,new Error("ERROR_POST_NEW_CADIDATE")}),!1):(e.accept_terms||e.error_list.push("Voc\xea deve aceitar os termos de uso."),e.transparent_campaign||e.error_list.push("Voc\xea deve aceitar fazer uma campanha transparente."),!1):(e.error_list.push("Os campos de senha devem ser iguais."),!1)},e.address_by_zipcode=function(){var r=e.candidate.address_zipcode;return 9==r.length&&t(r).then(function(r){var t=r.data,o=e.candidate;o.address_city=t.cidade,o.address_state=t.estado_info.nome,t.bairro&&t.logradouro&&(o.address_street=t.logradouro+" - "+t.bairro)},function(){throw swal({title:"Problemas ao carregar os dados do CEP!",text:"Ocorreu um erro ao tentar carregar os dados de sua localidade. Por gentileza preencha os campos manualmente."}),new Exception("ERROR_GET_ZIPCODE")}),!1},e.load_parties=function(){r.get("/api/party").then(function(r){e.party_list=r.data.party},function(){throw e.party_list=[],new Exception("ERROR_GET_PARTY_LIST")})},e.load_offices=function(){r.get("/api/office").then(function(r){e.office_list=r.data.office},function(){throw e.office_list=[],new Exception("ERROR_GET_OFFICE_LIST")})},e.reset=function(){e.candidate={}},e.load_offices(),e.load_parties()}]),e.votolegal.controller("ContatoController",["$scope","$http","serialize",function(e,r,t){e.message={},e.message_params=function(){return e.message},e.create=function(){var o=e.message_params();return r({method:"POST",url:"/api/contact",data:t.from_object(o),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){e.data;return document.location="/contato/success",!1},function(r){var t=r.data.form_error,o=function(e){return document.querySelector("form[name=contactForm] *[name="+e+"]")},a=function(e){var r={missing:" n\xe3o foi preenchido.","already exists":" j\xe1 foi cadastrado.",invalid:" est\xe1 inv\xe1lido."};return r[e]};e.error_list=[];for(var n in t){var i=o(n).attributes.placeholder.value;e.error_list.push(i+a(t[n]))}throw new Error("ERROR_POST_NEW_CONTACT")}),!1}}]),e.votolegal.controller("FaqController",["$scope","$sce",function(e){e.highlight=!0,e.faq_list=faq_list,e.search_answer=function(r){var t=faq_list.map(function(e){return e.title.match(new RegExp(r,"ig"))||e.content.match(new RegExp(r,"gi"))?e:void 0}),o=function(e){var r=[];for(var t in e)void 0!==e[t]&&r.push(e[t]);return r};return e.faq_list=o(t),!1}}])}(window.app=window.app||{});