!function(){"use strict";var r=function(){this.from_object=function(r){var e=[];if("object"!=typeof r)throw new Error("Param to be serializer isnt a object");for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];e.push(encodeURIComponent(n)+"="+encodeURIComponent(null==o?"":o))}return e.join("&").replace(/%20/g,"+")},this.from_form=function(r){var e=document.forms[r],n={};for(var o in e.elements)void 0!==e.elements[o].type&&(n[e.elements[o].name]=e.elements[o].value);return this.from_object(n)},this.to_json=function(r){return JSON.stringify(r)}},e=angular.module("admin",["angular-storage"]);e.config(["$httpProvider",function(r){delete r.defaults.headers.common["X-Requested-With"],r.defaults.headers.common["Content-Type"]="application/x-www-form-urlencoded"}]),e.factory("serialize",function(){return new r}),e.controller("AdminApprovalController",["$scope","$http","serialize",function(r,e){r.approval_list=function(){var r={api_key:""};e({method:"GET",url:"/api/admin/candidate/list?api_key="+r.api_key}).then(function(r){console.log(r.data)},function(r){var e=r.data;return"access denied"===e.error&&(document.location="/admin/signin"),!1})},r.approval_list()}]),e.controller("AuthController",["$scope","$http","serialize","store",function(r,e,n,o){r.signin={},r.signin_params=function(){return r.signin},r.authenticate=function(){var t=r.signin_params();return e({method:"POST",url:"/api/login",data:n.from_object(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(r){var e=r.data;o.set("user",{id:e.user_id,api_key:e.api_key});for(var n in e.roles)if("admin"===e.roles[n]){document.location="/admin";break}return!1},function(e){var n=e.data;if(r.error_list=[],n.hasOwnProperty("error")){var o={"Bad email or password.":"E-mail ou senha incorretos."};r.error_list.push(o[n.error])}if(n.form_error){var t=function(r){return document.querySelector("form[name=authForm] *[name="+r+"]")},i=function(r){var e={missing:" n\xe3o foi preenchido.","already exists":" j\xe1 foi cadastrado.",invalid:" est\xe1 inv\xe1lido."};return e[r]};for(var a in n){var s=t(a).attributes.placeholder.value;r.error_list.push(s+i(n[a]))}}throw new Error("ERROR_POST_SIGNIN_USER")}),!1}}])}();